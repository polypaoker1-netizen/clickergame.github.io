<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VISA CLICKER</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* –°–Ω–µ–≥ */
        .snow {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 20px;
            pointer-events: none;
            z-index: 1000;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to { transform: translateY(100vh) rotate(360deg); }
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 15px;
        }
        
        /* –®–∞–ø–∫–∞ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, #ff6b6b, #ffa500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
        }
        
        .top-menu {
            display: flex;
            gap: 10px;
        }
        
        .top-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.15);
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .top-btn:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-2px);
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .main-content { grid-template-columns: 1fr; }
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-box, .game-box, .upgrades-box, .inventory-box, .top-box, .ref-box {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            border-radius: 10px;
            transition: width 0.3s;
        }
        
        /* –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */
        .click-area {
            width: 250px;
            height: 250px;
            margin: 20px auto;
            cursor: pointer;
            position: relative;
            transition: transform 0.1s;
        }
        
        .click-circle {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #ff4757, #ff3838);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            box-shadow: 0 0 50px rgba(255,71,87,0.5);
            transition: all 0.2s;
        }
        
        .click-circle:active {
            transform: scale(0.95);
            box-shadow: 0 0 80px rgba(255,71,87,0.8);
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞ */
        .click-effect {
            position: absolute;
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: pulse 0.5s;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
        
        /* –£–ª—É—á—à–µ–Ω–∏—è */
        .upgrade-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .upgrade-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upgrade-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }
        
        .upgrade-btn {
            background: linear-gradient(90deg, #ffa500, #ff6b6b);
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* –ü–æ–¥–∞—Ä–æ–∫ */
        .gift {
            position: fixed;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, gold, orange);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 0 30px gold;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 30px;
            border-radius: 25px;
            max-width: 500px;
            width: 90%;
            border: 3px solid #0f3460;
        }
        
        .modal-title {
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
            color: #e94560;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #0f3460;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
        }
        
        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .bottom-menu {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .bottom-menu { grid-template-columns: repeat(3, 1fr); }
        }
        
        .menu-btn {
            padding: 20px 10px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .menu-btn:hover, .menu-btn.active {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }
        
        .menu-btn i {
            font-size: 24px;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            color: black;
            padding: 15px 25px;
            border-radius: 15px;
            z-index: 1001;
            animation: slideIn 0.5s;
            display: none;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .container { padding: 10px; }
            .header { flex-direction: column; gap: 10px; }
            .top-menu { flex-wrap: wrap; justify-content: center; }
            .top-btn { padding: 8px 15px; font-size: 14px; }
            .logo { font-size: 24px; }
            .click-area { width: 200px; height: 200px; }
            .stat-value { font-size: 24px; }
            .bottom-menu { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <!-- –°–Ω–µ–≥ -->
    <div id="snow-container"></div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div id="loginModal" class="modal" style="display: flex;">
        <div class="modal-content">
            <h2 class="modal-title">‚ùÑÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ VISA CLICKER! ‚ùÑÔ∏è</h2>
            <p style="text-align: center; margin-bottom: 20px; opacity: 0.9;">
                –ß—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å, –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª –∏ –ø—Ä–∏–¥—É–º–∞—Ç—å –Ω–∏–∫–Ω–µ–π–º!
            </p>
            
            <div class="input-group">
                <input type="text" id="usernameInput" placeholder="–ü—Ä–∏–¥—É–º–∞–π –∫—Ä—É—Ç–æ–π –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                <div id="usernameError" style="color: #ff6b6b; margin-top: 5px; display: none;"></div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                <p style="margin-bottom: 10px;">üì¢ <b>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:</b> –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª</p>
                <a href="https://t.me/visaclicker" target="_blank" style="color: #00ccff; text-decoration: none; font-weight: bold;">
                    üëâ t.me/visaclicker
                </a>
                <div style="margin-top: 10px;">
                    <input type="checkbox" id="subscribeCheck">
                    <label for="subscribeCheck">–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –Ω–∞ –∫–∞–Ω–∞–ª</label>
                </div>
            </div>
            
            <button class="btn" onclick="registerUser()">
                üéÆ –ù–ê–ß–ê–¢–¨ –ò–ì–†–ê–¢–¨
            </button>
        </div>
    </div>
    
    <!-- –ü–æ–¥–∞—Ä–æ–∫ -->
    <div class="gift" id="gift" onclick="collectGift()">üéÅ</div>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div class="container" id="gameInterface" style="display: none;">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="logo" onclick="window.open('https://t.me/visaclicker', '_blank')">
                VISA CLICKER
            </div>
            <div class="top-menu">
                <button class="top-btn" onclick="openFortune()">
                    üé° –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã
                </button>
                <button class="top-btn" onclick="openShop()">
                    üè™ –ú–∞–≥–∞–∑–∏–Ω (—Å–∫–æ—Ä–æ)
                </button>
                <button class="top-btn" onclick="showReferral()">
                    üë• –†–µ—Ñ–µ—Ä–∞–ª—ã: <span id="refCount">0</span>
                </button>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div>
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-box">
                    <h3><i class="fas fa-chart-line"></i> –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">VISA</div>
                            <div class="stat-value" id="visaCount">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–£–†–û–í–ï–ù–¨</div>
                            <div class="stat-value" id="levelCount">1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–ö–õ–ò–ö–û–í</div>
                            <div class="stat-value" id="clicksCount">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–ü–û–î–ê–†–ö–û–í</div>
                            <div class="stat-value" id="giftsCount">0</div>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è -->
                    <div style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è</span>
                            <span id="xpText">0/100 XP</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="xpBar" style="width: 0%;"></div>
                        </div>
                    </div>
                    
                    <!-- –≠–Ω–µ—Ä–≥–∏—è -->
                    <div style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>‚ö° –≠–ù–ï–†–ì–ò–Ø</span>
                            <span id="energyText">50/50</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="energyBar" style="width: 100%; background: linear-gradient(90deg, #00ff88, #00ccff);"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
                <div class="upgrades-box" style="margin-top: 20px;">
                    <h3><i class="fas fa-rocket"></i> –£–õ–£–ß–®–ï–ù–ò–Ø</h3>
                    <div class="upgrade-list">
                        <div class="upgrade-item">
                            <div>
                                <div style="font-weight: bold;">üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞</div>
                                <div style="font-size: 12px; opacity: 0.8;">–¢–µ–∫—É—â–∞—è: <span id="clickPower">x5</span></div>
                            </div>
                            <button class="upgrade-btn" onclick="buyUpgrade('click')" id="clickUpgradeBtn">
                                500 VISA
                            </button>
                        </div>
                        
                        <div class="upgrade-item">
                            <div>
                                <div style="font-weight: bold;">‚ö° –Å–º–∫–æ—Å—Ç—å —ç–Ω–µ—Ä–≥–∏–∏</div>
                                <div style="font-size: 12px; opacity: 0.8;">–ú–∞–∫—Å: <span id="maxEnergy">50</span></div>
                            </div>
                            <button class="upgrade-btn" onclick="buyUpgrade('energy')" id="energyUpgradeBtn">
                                800 VISA
                            </button>
                        </div>
                        
                        <div class="upgrade-item">
                            <div>
                                <div style="font-weight: bold;">üéÅ –®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞</div>
                                <div style="font-size: 12px; opacity: 0.8;">–¢–µ–∫—É—â–∏–π: <span id="giftChance">0.5%</span></div>
                            </div>
                            <button class="upgrade-btn" onclick="buyUpgrade('chance')" id="chanceUpgradeBtn">
                                1200 VISA
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div>
                <!-- –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
                <div class="game-box">
                    <h3><i class="fas fa-gamepad"></i> –ö–õ–ò–ö–ê–ô –ò –ó–ê–†–ê–ë–ê–¢–´–í–ê–ô!</h3>
                    
                    <div class="click-area" onclick="handleClick()" id="clickArea">
                        <div class="click-circle" id="clickCircle">
                            –ö–õ–ò–ö–ê–ô!
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <div style="display: flex; justify-content: center; gap: 30px;">
                            <div>
                                <div style="font-size: 14px; opacity: 0.8;">–°–∏–ª–∞ –∫–ª–∏–∫–∞</div>
                                <div style="font-size: 24px; font-weight: bold;" id="powerDisplay">x5</div>
                            </div>
                            <div>
                                <div style="font-size: 14px; opacity: 0.8;">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã</div>
                                <div style="font-size: 24px; font-weight: bold;" id="autoDisplay">0</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; font-size: 12px; opacity: 0.7;">
                            –®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞: <span id="chanceDisplay">0.5%</span> | 
                            –†–µ—Ñ–µ—Ä–∞–ª–æ–≤: <span id="refDisplay">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ -->
                <div class="top-box" style="margin-top: 20px;">
                    <h3><i class="fas fa-trophy"></i> –¢–û–ü –ò–ì–†–û–ö–û–í</h3>
                    <div id="topList">
                        <div style="text-align: center; padding: 20px; opacity: 0.7;">
                            –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
        <div class="bottom-menu">
            <button class="menu-btn active" onclick="showSection('upgrades')" id="btnUpgrades">
                <i class="fas fa-rocket"></i>
                <span>–£–õ–£–ß–®–ï–ù–ò–Ø</span>
            </button>
            
            <button class="menu-btn" onclick="showSection('inventory')" id="btnInventory">
                <i class="fas fa-backpack"></i>
                <span>–ò–ù–í–ï–ù–¢–ê–†–¨</span>
            </button>
            
            <button class="menu-btn" onclick="showSection('top')" id="btnTop">
                <i class="fas fa-trophy"></i>
                <span>–¢–û–ü</span>
            </button>
            
            <button class="menu-btn" onclick="showSection('referral')" id="btnReferral">
                <i class="fas fa-users"></i>
                <span>–†–ï–§–ï–†–ê–õ–´</span>
            </button>
            
            <button class="menu-btn" onclick="exitGame()" id="btnExit">
                <i class="fas fa-sign-out-alt"></i>
                <span>–í–´–•–û–î</span>
            </button>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
        <div id="inventorySection" class="inventory-box" style="display: none; margin-top: 20px;">
            <h3><i class="fas fa-backpack"></i> –ò–ù–í–ï–ù–¢–ê–†–¨</h3>
            <div style="text-align: center; padding: 30px;">
                <div style="font-size: 48px; margin-bottom: 20px;">üéÅ</div>
                <h4 style="margin-bottom: 10px;">–ü–æ–¥–∞—Ä–∫–æ–≤ —Å–æ–±—Ä–∞–Ω–æ: <span id="totalGifts">0</span></h4>
                <p style="margin-bottom: 20px; opacity: 0.8;">
                    –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±–ª–∏–∂–∞–π—à–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!
                </p>
                <button class="top-btn" onclick="showNotification('–§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–∫–æ—Ä–æ!')">
                    –ü–û–ö–ê–ó–ê–¢–¨ –ú–û–ò –ü–û–î–ê–†–ö–ò
                </button>
                
                <div style="margin-top: 30px; text-align: left; background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                    <h4 style="margin-bottom: 15px;">üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        <div>–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: <span id="totalClicks">0</span></div>
                        <div>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ VISA: <span id="totalVisa">0</span></div>
                        <div>–®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞: <span id="totalChance">0.5%</span></div>
                        <div>–£—Ä–æ–≤–µ–Ω—å: <span id="totalLevel">1</span></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ -->
        <div id="referralSection" class="ref-box" style="display: none; margin-top: 20px;">
            <h3><i class="fas fa-users"></i> –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</h3>
            <div style="text-align: center; padding: 20px;">
                <div style="background: rgba(0,255,136,0.2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #00ff88; margin-bottom: 10px;">üéØ –ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞ - –ø–æ–ª—É—á–∏ 100 VISA!</h4>
                    <p>–ó–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å 100 VISA</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <p style="margin-bottom: 10px;">–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</p>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; word-break: break-all; font-size: 14px;">
                        https://polypacker1-netizen.github.io/clickergame/?ref=<span id="userRefCode">000</span>
                    </div>
                    <button class="top-btn" onclick="copyRefLink()" style="margin-top: 10px;">
                        <i class="fas fa-copy"></i> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
                    </button>
                </div>
                
                <div>
                    <h4>–¢–≤–æ–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã:</h4>
                    <div id="refList" style="margin-top: 10px;">
                        <p style="opacity: 0.7;">–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC4wGk6vR5QhY7Qn8W6pLmJvKjXxYzAbc",
            authDomain: "visaclicker-game.firebaseapp.com",
            databaseURL: "https://visaclicker-game-default-rtdb.firebaseio.com",
            projectId: "visaclicker-game",
            storageBucket: "visaclicker-game.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef123456"
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameData = {
            username: '',
            userId: '',
            visa: 50,
            level: 1,
            xp: 0,
            xpNeeded: 100,
            energy: 50,
            maxEnergy: 50,
            clicks: 0,
            totalClicks: 0,
            gifts: 0,
            referrals: 0,
            clickPower: 5,
            autoClickers: 0,
            giftChance: 0.005,
            upgrades: {
                click: { level: 1, cost: 500 },
                energy: { level: 1, cost: 800 },
                chance: { level: 1, cost: 1200 }
            },
            lastEnergyUpdate: Date.now(),
            referralCode: '',
            referredBy: ''
        };
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const refCode = urlParams.get('ref');
        
        // –°–Ω–µ–≥
        function createSnow() {
            const snowContainer = document.getElementById('snow-container');
            for(let i = 0; i < 50; i++) {
                const snow = document.createElement('div');
                snow.classList.add('snow');
                snow.innerHTML = '‚ùÑ';
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.animationDuration = (Math.random() * 5 + 5) + 's';
                snow.style.opacity = Math.random() * 0.5 + 0.5;
                snowContainer.appendChild(snow);
            }
        }
        
        // –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
        function createClickEffect(x, y) {
            const effect = document.createElement('div');
            effect.classList.add('click-effect');
            effect.style.left = (x - 25) + 'px';
            effect.style.top = (y - 25) + 'px';
            document.getElementById('clickArea').appendChild(effect);
            
            setTimeout(() => effect.remove(), 500);
        }
        
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(text, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = text;
            notification.style.display = 'block';
            
            if(type === 'error') {
                notification.style.background = 'linear-gradient(90deg, #ff6b6b, #ff3838)';
            } else if(type === 'success') {
                notification.style.background = 'linear-gradient(90deg, #00ff88, #00ccff)';
            } else if(type === 'gift') {
                notification.style.background = 'linear-gradient(90deg, gold, orange)';
                notification.style.color = 'black';
            }
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function registerUser() {
            const username = document.getElementById('usernameInput').value.trim();
            const subscribed = document.getElementById('subscribeCheck').checked;
            
            if(!username) {
                document.getElementById('usernameError').textContent = '–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º!';
                document.getElementById('usernameError').style.display = 'block';
                return;
            }
            
            if(!subscribed) {
                showNotification('–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å!', 'error');
                return;
            }
            
            if(username.length < 3) {
                document.getElementById('usernameError').textContent = '–ù–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 3 —Å–∏–º–≤–æ–ª–æ–≤';
                document.getElementById('usernameError').style.display = 'block';
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–Ω—è—Ç –ª–∏ –Ω–∏–∫
            const snapshot = await database.ref('users').orderByChild('username').equalTo(username).once('value');
            if(snapshot.exists()) {
                document.getElementById('usernameError').textContent = '–≠—Ç–æ—Ç –Ω–∏–∫ —É–∂–µ –∑–∞–Ω—è—Ç!';
                document.getElementById('usernameError').style.display = 'block';
                return;
            }
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            const referralCode = Math.random().toString(36).substr(2, 8).toUpperCase();
            
            gameData.userId = userId;
            gameData.username = username;
            gameData.referralCode = referralCode;
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
            if(refCode) {
                gameData.referredBy = refCode;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Firebase
            await database.ref('users/' + userId).set({
                username: username,
                visa: gameData.visa,
                level: gameData.level,
                xp: gameData.xp,
                xpNeeded: gameData.xpNeeded,
                energy: gameData.energy,
                maxEnergy: gameData.maxEnergy,
                clicks: gameData.clicks,
                totalClicks: gameData.totalClicks,
                gifts: gameData.gifts,
                referrals: gameData.referrals,
                clickPower: gameData.clickPower,
                autoClickers: gameData.autoClickers,
                giftChance: gameData.giftChance,
                upgrades: gameData.upgrades,
                lastEnergyUpdate: gameData.lastEnergyUpdate,
                referralCode: referralCode,
                referredBy: gameData.referredBy,
                joined: Date.now()
            });
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª, –Ω–∞—á–∏—Å–ª—è–µ–º –±–æ–Ω—É—Å
            if(refCode && refCode !== referralCode) {
                // –ù–∞—Ö–æ–¥–∏–º —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
                const refSnapshot = await database.ref('users').orderByChild('referralCode').equalTo(refCode).once('value');
                if(refSnapshot.exists()) {
                    const refData = Object.values(refSnapshot.val())[0];
                    const refId = Object.keys(refSnapshot.val())[0];
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª–∞
                    await database.ref('users/' + refId + '/referrals').set(refData.referrals + 1);
                    await database.ref('users/' + refId + '/visa').set(refData.visa + 100);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    await database.ref('users/' + userId + '/visa').set(gameData.visa + 50);
                    gameData.visa += 50;
                    
                    showNotification('üéâ –¢—ã –ø–æ–ª—É—á–∏–ª 50 VISA –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–≥–∞!', 'success');
                }
            }
            
            // –ü—Ä—è—á–µ–º –º–æ–¥–∞–ª–∫—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä—É
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('gameInterface').style.display = 'block';
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–Ω–µ–≥
            createSnow();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            loadTopPlayers();
            
            showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}! üéÆ`, 'success');
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        function handleClick(event) {
            if(gameData.energy <= 0) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }
            
            // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞
            let x, y;
            if(event) {
                x = event.clientX;
                y = event.clientY;
            } else {
                const rect = document.getElementById('clickCircle').getBoundingClientRect();
                x = rect.left + rect.width / 2;
                y = rect.top + rect.height / 2;
            }
            
            // –≠—Ñ—Ñ–µ–∫—Ç
            createClickEffect(x, y);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            const circle = document.getElementById('clickCircle');
            circle.style.transform = 'scale(0.9)';
            setTimeout(() => circle.style.transform = 'scale(1)', 100);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
            gameData.clicks++;
            gameData.totalClicks++;
            gameData.visa += gameData.clickPower;
            gameData.xp += 2;
            
            // –¢—Ä–∞—Ç–∞ —ç–Ω–µ—Ä–≥–∏–∏ (1 —ç–Ω–µ—Ä–≥–∏—è –Ω–∞ 10 –∫–ª–∏–∫–æ–≤)
            if(gameData.clicks % 10 === 0) {
                gameData.energy = Math.max(0, gameData.energy - 1);
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            if(gameData.xp >= gameData.xpNeeded) {
                gameData.level++;
                gameData.xp = 0;
                gameData.xpNeeded = Math.floor(gameData.xpNeeded * 1.5);
                showNotification(`üéâ –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${gameData.level}!`, 'success');
            }
            
            // –®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞ (0.5%)
            if(Math.random() < gameData.giftChance) {
                showGift();
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveGame();
            updateUI();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫
        function showGift() {
            const gift = document.getElementById('gift');
            gift.style.display = 'flex';
            gift.style.left = Math.random() * 70 + 15 + '%';
            gift.style.top = Math.random() * 70 + 15 + '%';
            
            showNotification('üéÅ –ü–æ—è–≤–∏–ª—Å—è –ø–æ–¥–∞—Ä–æ–∫! –ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ!', 'gift');
            
            setTimeout(() => {
                if(gift.style.display !== 'none') {
                    gift.style.display = 'none';
                    showNotification('–ü–æ–¥–∞—Ä–æ–∫ –∏—Å—á–µ–∑!', 'error');
                }
            }, 5000);
        }
        
        // –°–æ–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫
        function collectGift() {
            const gift = document.getElementById('gift');
            gift.style.display = 'none';
            
            // –¢–∏–ø –ø–æ–¥–∞—Ä–∫–∞ (70% VISA, 20% —É–ª—É—á—à–µ–Ω–∏–µ, 10% –ø—Ä–µ–¥–º–µ—Ç)
            const rand = Math.random();
            
            if(rand < 0.7) {
                // VISA
                const amount = Math.floor(Math.random() * 50) + 50;
                gameData.visa += amount;
                showNotification(`üéÅ –ü–æ–ª—É—á–µ–Ω–æ ${amount} VISA!`, 'success');
            } else if(rand < 0.9) {
                // –£–ª—É—á—à–µ–Ω–∏–µ
                gameData.clickPower++;
                showNotification(`üéÅ –°–∏–ª–∞ –∫–ª–∏–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞! –¢–µ–ø–µ—Ä—å: x${gameData.clickPower}`, 'success');
            } else {
                // –ü—Ä–µ–¥–º–µ—Ç
                gameData.gifts++;
                showNotification(`üéÅ –†–µ–¥–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç –ø–æ–ª—É—á–µ–Ω! –í—Å–µ–≥–æ: ${gameData.gifts}`, 'gift');
            }
            
            saveGame();
            updateUI();
        }
        
        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(type) {
            const upgrade = gameData.upgrades[type];
            
            if(gameData.visa < upgrade.cost) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ VISA!', 'error');
                return;
            }
            
            gameData.visa -= upgrade.cost;
            
            switch(type) {
                case 'click':
                    gameData.clickPower += 2;
                    upgrade.level++;
                    upgrade.cost = Math.floor(upgrade.cost * 2);
                    showNotification(`üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞: x${gameData.clickPower}`, 'success');
                    break;
                    
                case 'energy':
                    gameData.maxEnergy += 10;
                    gameData.energy = gameData.maxEnergy;
                    upgrade.level++;
                    upgrade.cost = Math.floor(upgrade.cost * 1.8);
                    showNotification(`‚ö° –Å–º–∫–æ—Å—Ç—å —ç–Ω–µ—Ä–≥–∏–∏: ${gameData.maxEnergy}`, 'success');
                    break;
                    
                case 'chance':
                    gameData.giftChance += 0.001;
                    upgrade.level++;
                    upgrade.cost = Math.floor(upgrade.cost * 2.2);
                    showNotification(`üéÅ –®–∞–Ω—Å –ø–æ–¥–∞—Ä–∫–∞: ${(gameData.giftChance*100).toFixed(2)}%`, 'success');
                    break;
            }
            
            saveGame();
            updateUI();
        }
        
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
        function updateEnergy() {
            const now = Date.now();
            const timeDiff = (now - gameData.lastEnergyUpdate) / 1000 / 60; // –≤ –º–∏–Ω—É—Ç–∞—Ö
            
            if(timeDiff > 0) {
                // 50 —ç–Ω–µ—Ä–≥–∏–∏ –∑–∞ 20 –º–∏–Ω—É—Ç
                const energyGain = Math.floor((timeDiff / 20) * gameData.maxEnergy);
                if(energyGain > 0) {
                    gameData.energy = Math.min(gameData.maxEnergy, gameData.energy + energyGain);
                    gameData.lastEnergyUpdate = now;
                    saveGame();
                }
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            if(gameData.userId) {
                database.ref('users/' + gameData.userId).update({
                    visa: gameData.visa,
                    level: gameData.level,
                    xp: gameData.xp,
                    xpNeeded: gameData.xpNeeded,
                    energy: gameData.energy,
                    maxEnergy: gameData.maxEnergy,
                    clicks: gameData.clicks,
                    totalClicks: gameData.totalClicks,
                    gifts: gameData.gifts,
                    referrals: gameData.referrals,
                    clickPower: gameData.clickPower,
                    autoClickers: gameData.autoClickers,
                    giftChance: gameData.giftChance,
                    upgrades: gameData.upgrades,
                    lastEnergyUpdate: gameData.lastEnergyUpdate
                });
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
            updateEnergy();
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            document.getElementById('visaCount').textContent = gameData.visa;
            document.getElementById('levelCount').textContent = gameData.level;
            document.getElementById('clicksCount').textContent = gameData.totalClicks;
            document.getElementById('giftsCount').textContent = gameData.gifts;
            document.getElementById('refCount').textContent = gameData.referrals;
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å
            const xpPercent = (gameData.xp / gameData.xpNeeded) * 100;
            document.getElementById('xpBar').style.width = xpPercent + '%';
            document.getElementById('xpText').textContent = `${gameData.xp}/${gameData.xpNeeded} XP`;
            
            // –≠–Ω–µ—Ä–≥–∏—è
            const energyPercent = (gameData.energy / gameData.maxEnergy) * 100;
            document.getElementById('energyBar').style.width = energyPercent + '%';
            document.getElementById('energyText').textContent = `${gameData.energy}/${gameData.maxEnergy}`;
            
            // –£–ª—É—á—à–µ–Ω–∏—è
            document.getElementById('clickPower').textContent = `x${gameData.clickPower}`;
            document.getElementById('maxEnergy').textContent = gameData.maxEnergy;
            document.getElementById('giftChance').textContent = (gameData.giftChance*100).toFixed(2) + '%';
            
            // –ö–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
            document.getElementById('clickUpgradeBtn').textContent = gameData.upgrades.click.cost + ' VISA';
            document.getElementById('energyUpgradeBtn').textContent = gameData.upgrades.energy.cost + ' VISA';
            document.getElementById('chanceUpgradeBtn').textContent = gameData.upgrades.chance.cost + ' VISA';
            
            // –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å
            document.getElementById('powerDisplay').textContent = `x${gameData.clickPower}`;
            document.getElementById('autoDisplay').textContent = gameData.autoClickers;
            document.getElementById('chanceDisplay').textContent = (gameData.giftChance*100).toFixed(2) + '%';
            document.getElementById('refDisplay').textContent = gameData.referrals;
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
            document.getElementById('totalGifts').textContent = gameData.gifts;
            document.getElementById('totalClicks').textContent = gameData.totalClicks;
            document.getElementById('totalVisa').textContent = gameData.visa;
            document.getElementById('totalChance').textContent = (gameData.giftChance*100).toFixed(2) + '%';
            document.getElementById('totalLevel').textContent = gameData.level;
            
            // –†–µ—Ñ–µ—Ä–∞–ª—ã
            document.getElementById('userRefCode').textContent = gameData.referralCode;
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞
        async function loadTopPlayers() {
            try {
                const snapshot = await database.ref('users').orderByChild('visa').limitToLast(5).once('value');
                const topList = document.getElementById('topList');
                
                if(!snapshot.exists()) {
                    topList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤</div>';
                    return;
                }
                
                let html = '';
                const users = [];
                
                snapshot.forEach(child => {
                    users.push(child.val());
                });
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ VISA
                users.sort((a,b) => b.visa - a.visa);
                
                users.forEach((user, index) => {
                    const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                    html += `
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <span style="font-size: 20px;">${medal}</span>
                                <span style="font-weight: bold; margin-left: 10px;">${user.username}</span>
                            </div>
                            <div style="color: #ffd700; font-weight: bold;">
                                ${user.visa} VISA
                            </div>
                        </div>
                    `;
                });
                
                topList.innerHTML = html;
            } catch(error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–ø–∞:', error);
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é
        function showSection(section) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.getElementById('inventorySection').style.display = 'none';
            document.getElementById('referralSection').style.display = 'none';
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
            switch(section) {
                case 'inventory':
                    document.getElementById('inventorySection').style.display = 'block';
                    document.getElementById('btnInventory').classList.add('active');
                    break;
                case 'top':
                    document.getElementById('btnTop').classList.add('active');
                    loadTopPlayers();
                    break;
                case 'referral':
                    document.getElementById('referralSection').style.display = 'block';
                    document.getElementById('btnReferral').classList.add('active');
                    break;
                case 'upgrades':
                    document.getElementById('btnUpgrades').classList.add('active');
                    break;
            }
        }
        
        // –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã
        function openFortune() {
            showNotification('–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!', 'info');
        }
        
        // –ú–∞–≥–∞–∑–∏–Ω
        function openShop() {
            showNotification('–ú–∞–≥–∞–∑–∏–Ω –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!', 'info');
        }
        
        // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
        function copyRefLink() {
            const link = `https://polypacker1-netizen.github.io/clickergame/?ref=${gameData.referralCode}`;
            navigator.clipboard.writeText(link);
            showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
        function showReferral() {
            showSection('referral');
        }
        
        // –í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã
        function exitGame() {
            if(confirm('–í—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã?')) {
                if(typeof Telegram !== 'undefined' && Telegram.WebApp) {
                    Telegram.WebApp.close();
                } else {
                    alert('–ò–≥—Ä–∞ –∑–∞–∫—Ä—ã—Ç–∞');
                }
            }
        }
        
        // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã
        function startAutoClickers() {
            setInterval(() => {
                if(gameData.autoClickers > 0) {
                    for(let i = 0; i < gameData.autoClickers; i++) {
                        handleClick();
                    }
                }
            }, 1000);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã
            startAutoClickers();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
            setInterval(updateEnergy, 60000);
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(saveGame, 30000);
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = init;
    </script>
</body>
</html>
